<!--index.wxml-->
<scroll-view class="scrollarea" scroll-y type="list">
  <view class="container">
    <view class="clock-card">
      <view class="time-display">{{currentTime}}</view>
      <view class="date-display">{{currentDate}}</view>
      <view class="format-switch">
        <text>24小时制</text>
        <switch checked="{{is24hFormat}}" bindchange="onFormatChange"/>
      </view>
    </view>
    
    <view class="device-info {{connected ? 'connected' : 'disconnected'}}">
      <view class="status-dot"></view>
      <text>{{connectionStatus}}</text>
      <button size="mini" bindtap="navigateToConnect">{{connected ? '重新连接' : '连接设备'}}</button>
    </view>
    
    <view class="time-settings">
      <button class="setting-btn" bindtap="syncTime">
        <view class="btn-content">
          <text class="icon">⏱️</text>
          <text>同步时间到设备</text>
        </view>
      </button>
      <button class="setting-btn" bindtap="showManualTimeDialog">
        <view class="btn-content">
          <text class="icon">🕒</text>
          <text>手动设置时间</text>
        </view>
      </button>
    </view>
    
    <view class="feature-container">
      <view class="feature-grid">
        <view class="feature-item" bindtap="navigateToAlarm">
          <view class="feature-icon">⏰</view>
          <view class="feature-name">闹钟</view>
        </view>
        <view class="feature-item" bindtap="navigateToTimer">
          <view class="feature-icon">⏲️</view>
          <view class="feature-name">定时器</view>
        </view>
        <view class="feature-item" bindtap="navigateToReminder">
          <view class="feature-icon">📅</view>
          <view class="feature-name">提醒事项</view>
        </view>
      </view>
    </view>
  </view>
</scroll-view>

<!-- 手动设置时间日期弹窗 -->
<view class="manual-time-modal" wx:if="{{showManualTimeModal}}">
  <view class="modal-mask" bindtap="hideManualTimeDialog"></view>
  <view class="modal-content">
    <view class="modal-header">手动设置时间</view>
    <view class="modal-body">
      <view class="time-picker-section">
        <picker mode="date" value="{{manualDate}}" start="2000-01-01" end="2099-12-31" bindchange="onDateChange">
          <view class="picker-item">
            <text>日期:</text>
            <text class="picker-value">{{manualDate}}</text>
          </view>
        </picker>
        <picker mode="time" value="{{manualTime}}" bindchange="onTimeChange">
          <view class="picker-item">
            <text>时间:</text>
            <text class="picker-value">{{manualTime}}</text>
          </view>
        </picker>
      </view>
    </view>
    <view class="modal-footer">
      <button class="modal-btn cancel-btn" bindtap="hideManualTimeDialog">取消</button>
      <button class="modal-btn confirm-btn" bindtap="setManualTime">确定</button>
    </view>
  </view>
</view>
